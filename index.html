<html>
    <head>
        <meta charset="UTF-8">
        <meta name="scrennlook" content="wight = devise-wight, initial-scale=1.0">
        <title>Lab_2</title>
        <link href = "style.css" rel="stylesheet">
    </head>
    <body>
        <div class = "container">
            <top id="1">
                Здесь могла быть ваша реклама
                <x id = "x">
                    Работа — не волк, работа — это work!
                    Nulla a urna in nibh placerat mollis.
                    Vivamus a urna a odio ultrices egestas.
                    Etiam vitae sodales justo. Ut eget tristique enim.
                    In vestibulum nulla facilisis est commodo auctor.
                    Cras placerat sed velit sit amet suscipit.
                </x>
            </top>
            <two id="2">
                <p id="2Content">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                    Praesent ultricies condimentum nunc eget laoreet.
                    Suspendisse ut iaculis risus.
                    Cras vitae justo erat.
                    Sed et luctus arcu.
                    Quisque rhoncus pulvinar euismod.
                </p>
            </two>
            <three id="3">
                <form name = "Form3">
                    <input name = "Line" size=auto>
                    <input type = "button" value = "Send" onClick = "Save1();">
                </form>
                Suspendisse mollis purus consectetur, laoreet purus id, luctus enim.
                Vestibulum pharetra dictum dui vitae gravida.
                Nulla a urna in nibh placerat mollis.
                Vivamus a urna a odio ultrices egestas.
                Etiam vitae sodales justo. Ut eget tristique enim.
                In vestibulum nulla facilisis est commodo auctor.
                Cras placerat sed velit sit amet suscipit.
                Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
                Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Donec posuere at nulla gravida sodales.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Nam ullamcorper id velit ut convallis.
                Curabitur in eleifend lorem.
            </three>
            <four id="4">
                Sed gravida leo nec quam sollicitudin suscipit.
                Quisque finibus dictum urna vel ultrices.
                Nullam ultricies pellentesque hendrerit.
                Suspendisse dictum luctus velit, eget pulvinar lorem venenatis sed.
                Curabitur eleifend felis et metus tincidunt aliquam.
                Curabitur at placerat erat, tristique bibendum nisi.
                Nam non venenatis augue.
            </four>
            <five id="5">
                <img src = "D:\OKRLab2\var10.png">
            </five>
            <six id="SIx">
                Ты дома
                <p><input onchange="clickMeBold()" name="bold" id="medblod" type="radio" value="midbold"> Medium Bold</p>
                <p><input onchange="clickMeBold()" name="bold" id="bold" type="radio" value="blodbold"> Bold</p>
            </six>
            <down id="7">
                <y>Конец странички != конец света</y>
                Но не здесь(
            </down>
            <blank1></blank1>
            <blank2></blank2>
            <blank3></blank3>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                if (performance.navigation.type == 1) {
                    if(checkCookie('maxNumber')){
                        if(window.confirm(`Some Cookies have been created on this page: \n${document.cookie} \n Do you want to save them?`)) 
                            alert('Cookies were saved, now the page will be refreshed.');
                        else{
                                setCookie('maxNumber', '');
                            } 
                    }
                }

                if(checkCookie('maxNumber')) document.getElementById("#Form3").remove();

                makeEditableBlock('2');
                initEditableBlocks();
                })
                //task_1
                var bl4 = document.getElementById("4");
                var bl5 = document.getElementById("5");
                var temp = bl4.innerHTML;
                bl4.innerHTML = bl5.innerHTML;
                bl5.innerHTML = temp;
                //-----

                //task_2
                function fucn_task_2(a,b,c)
                {
                    p = (a+b+c)/2;
                    S = Math.floor(Math.sqrt(p*(p-a)*(p-b)*(p-c)));
                    return S;
                }
                var a = 4, b = 3, c = 5;
                var bl3 = document.getElementById("3");
                bl3.innerHTML = bl3.innerHTML + fucn_task_2(a,b,c);
                //-----

                //task_5
                document.getElementById("x").addEventListener("scroll",func);
                function func()
                {
                    alert("Stop scrolling");
                }
                //-----

                //task_4
                if(window.localStorage)
                {
                    if(localStorage.getItem('check') == null) {localStorage.setItem('check',0);}
                        else if(localStorage.getItem('check') == 0) {document.querySelector('#SIx').style.fontWeight = 'normal';}
                            else {document.querySelector('#SIx').style.fontWeight = 'bold';}
                }   
                else alert(" localStorage cant be used");
                {
                    function clickMeBold() {
                    if (document.querySelector('#medblod').checked === true){
                    localStorage.setItem('check',0);
                    document.querySelector('#SIx').style.fontWeight = 'normal';
                }
                if (document.querySelector('#medblod').checked === false){
                localStorage.setItem('check',1);
                document.querySelector('#SIx').style.fontWeight = 'bold';
                }
                }
                }

                function deleteAllCookies()
                {
                    var cookies = document.cookie.split(";");
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i];
                        var eqPos = cookie.indexOf("=");
                        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
                    }
                }    
                //task_3
                function Save1()
                {
                var Data = document.Form3.Line.value;
                a = new Array(10);
                a = Data.split(' ');
                var q = Math.max(...a);
                var t =0;
                for(i = 0; i<10;i++){
                    if(a[i]==q){
                        t++;
                    }
                }
                let date = new Date(Date.now() + 86400e3);
                date = date.toUTCString();
                alert(q+" ---> "+t);
                document.cookie = "Num =" + t + "; expires=" + date + "; path=/";
                }
                
                //task_6
                const initEditableBlocks = () => {
                    Array.from(document.getElementsByClassName('editArea')).map((area) => {
                        area.addEventListener('change', (event) => {
                        const newContent = event.target.value;
                        localStorage.setItem(`${event.target.parentNode.id}Content`, newContent);
                        event.target.parentNode.children[0].innerHTML = newContent;
                        })
                    })
                    Array.from(document.getElementsByClassName('editBtn')).map((btn) => {
                        btn.addEventListener('click', (event) => {
                        localStorage.removeItem(`${event.target.parentNode.id}Content`);
                        document.location.reload();
                        })
                    })
                }
                const makeEditableBlock = (blockId) => {
                    const content = localStorage.getItem(`${blockId}Content`) ? 
                    localStorage.getItem(`${blockId}Content`) : 
                    document.getElementById(blockId).innerHTML;
                    document.getElementById(blockId).innerHTML = content;
                    document.getElementById(blockId).insertAdjacentHTML('beforeend', 
                    `<textarea class="editArea">${content}</textarea>
                    <button type="submit" class="editBtn">Return default</button>`)
                }
            </script>
        </div>
    </body>
</html>
